
# #######################################################################################
#  MEGA ALTARIA STORM HYPRLAND CONFIG
#  Theme: Electric Blue (#00B4D8) & Deep Night (#151921)
# #######################################################################################


# MONITORS 
monitor=,preferred,auto,auto

### MY PROGRAMS ###
$terminal = kitty

$fileManager = kitty --title yazi -e yazi

$menu = wofi --show drun --columns 2 --allow-images

### AUTOSTART ###
# 1. System Essentials
exec-once = /usr/lib/polkit-kde-authentication-agent-1 & # Password Popup
exec-once = nm-applet &  # Network Icon
# exec-once = dunst &  # Notifications
exec-once = swaync

# Kill any stuck instances
exec-once = killall wl-paste

# Start it fresh (and detach it from the terminal)
exec-once = wl-paste --watch cliphist store 
# 2. The Desktop
exec-once = hyprpaper# Wallpaper Engine
exec-once = waybar & # Status Bar
exec-once = hypridle # Auto-lock/Sleep

# 3. Instant Lock on Login (Security)
exec-once = hyprlock

exec-once = glava 
exec-once = sleep 3 && ~/.config/hypr/scripts/glava_toggle.sh
exec-once = spotify

#############################
### ENVIRONMENT VARIABLES ###
#############################
env = XCURSOR_SIZE,16
env = HYPRCURSOR_SIZE,16
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_QPA_PLATFORMTHEME,qt5ct
env = GTK_THEME,Adwaita-dark
env = XCURSOR_THEME,Bibata-Modern-Ice

#####################
### LOOK AND FEEL ###
#####################

general {
# The Storm Geometry
gaps_in = 8
gaps_out = 15
 border_size = 2

# THEME COLORS
# Active: Electric Blue (Matches Waybar)
col.active_border = rgb(00B4D8)
# Inactive: Deep Night
col.inactive_border = rgb(151921)

layout = dwindle
resize_on_border = true 
}

decoration {
rounding = 15

# Blur (The Frosted Glass Effect)
blur {
enabled = true
size = 6
passes = 3  # High quality blur
new_optimizations = true
ignore_opacity = true
}

# Shadows (Floating Effect)
shadow {
enabled = true
range = 20
render_power = 3
color = rgba(1a1a1aee)
}
# Dim inactive windows slightly for focus
active_opacity = 1.0
inactive_opacity = 0.95
}

animations {
enabled = yes

# The "Fast Cloud" Curves
bezier = cloudCurve, 0.05, 0.9, 0.1, 1.05

# Windows: Snappy but smooth (Speed 4)
animation = windows, 1, 4, cloudCurve
animation = windowsOut, 1, 4, default, popin 80%

# Border animations can stay a bit slower for style
animation = border, 1, 10, default

# Fades: Fast (Speed 3)
animation = fade, 1, 3, default

# Workspaces: Fast Slide (Speed 4)
animation = workspaces, 1, 4, default

# Layers (Wofi/Waybar): Snappy Slide (Speed 3)
animation = layers, 1, 2, default, slide
animation = layersIn, 1, 2, default, slide
animation = layersOut, 1, 2, default, slide
}

dwindle {
pseudotile = true
preserve_split = true
}

misc {
force_default_wallpaper = 0
disable_hyprland_logo = true
}

#############
### INPUT ###
#############

input {
kb_layout = us
follow_mouse = 1

touchpad {
natural_scroll = false
tap-to-click = true
disable_while_typing = true
}
}

###################
### KEYBINDINGS ###
###################
$mainMod = SUPER

# System Binds
bind = $mainMod, T, exec, $terminal
bind = $mainMod, Q, killactive,
bind = $mainMod, M, exit,
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, V, togglefloating,

# 1. Apps (Grid)
# Unified Launcher (Apps + Calc + Emoji)
#
# 2. Calculator (Native Plugin)
# 1. Apps & Math (Smart Launcher)
# Uses the script that handles =math equations and forces the Grid layout
bind = $mainMod, SPACE, exec, wofi --show drun

# 2. Power Menu (Goodnight?)
# Uses your custom script
bind = $mainMod, Escape, exec, bash ~/.config/hypr/scripts/powermenu.sh

# 3. Emoji Picker
# Uses the standard wofi-emoji tool
bind = $mainMod, period, exec, wofi-emoji

# 4. Clipboard History (Smart Paste)
# Uses your script that auto-types into Kitty vs Browser
bind = ALT, V, exec, bash ~/.config/hypr/scripts/smart_paste.sh
# Shows "Calc" mode instantly
# bind = $mainMod, C, exec, rofi -show calc -modi calc -no-show-match -no-sort
# 3. Emoji (Native Plugin)
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindle
# bind = $mainMod, Escape, exec, bash ~/.config/hypr/scripts/powermenu.sh
# Clipboard History: Alt + V (Smart Script)
# bind = ALT, V, exec, bash ~/.config/hypr/scripts/smart_paste.sh

bind = ALT, A, exec, pkill -x glava || glava
# Application Binds
bind = $mainMod, B, exec, zen-browser
bind = $mainMod, D, exec, vesktop
bind = $mainMod, S, exec, spotify

# Screenshot (Hyprshot)
# Shift+S = Selection, Alt+S = Window, Print = Full
bind = $mainMod SHIFT, S, exec, hyprshot -m region --clipboard-only
bind = $mainMod ALT, S, exec, hyprshot -m window --clipboard-only
bind = $mainMod, Print, exec, hyprshot -m output --clipboard-only

# Window Management (Focus)
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d
# bind = $mainMod, period, exec, wofi-emoji
# Window Movement (Swap/Retile)
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# Window Resizing (Keyboard)
bind = $mainMod ALT, right, resizeactive, 20 0
bind = $mainMod ALT, left, resizeactive, -20 0
bind = $mainMod ALT, up, resizeactive, 0 -20
bind = $mainMod ALT, down, resizeactive, 0 20

# Mouse Resizing
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Switch Workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5

# Move Window to Workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod ALT, C, exec, qalculate-gtk
# Laptop Keys (Volume/Brightness)
# Targeted Volume Control (via Script)
bindel = ,XF86AudioRaiseVolume, exec, bash ~/.config/hypr/scripts/volume_control.sh up
bindel = ,XF86AudioLowerVolume, exec, bash ~/.config/hypr/scripts/volume_control.sh down
bindel = ,XF86AudioMute, exec, bash ~/.config/hypr/scripts/volume_control.sh mute

# Brightness Control
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 10%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 10%-

# Media Control
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previous

##############################
### WINDOW RULES ###
##############################
# Ignore maximize requests
windowrule = suppressevent maximize, class:.*

# 1. Make Vesktop Glassy (Clear transparency)
windowrulev2 = opacity 0.90 0.90, class:^(vesktop)$

# 2. Make Spotify Glassy (Blurry transparency)
windowrulev2 = opacity 0.85 0.85, class:^(Spotify)$

# 3. Float the Bluetooth Manager (Bluetuith)
windowrule = float, title:^(float_bluetuith)$
windowrule = size 800 600, title:^(float_bluetuith)$
windowrule = center, title:^(float_bluetuith)$
# Make Yazi floating and glassy
windowrulev2 = opacity 0.90 0.90, title:^(yazi)$
# Optional: If you want file manager to always float center
# windowrulev2 = float, title:^(yazi)$
# windowrulev2 = size 1000 700, title:^(yazi)$
# windowrulev2 = center, title:^(yazi)$
# Prevent mpv from maximizing instantly, keep it tiled but respect aspect ratio
windowrulev2 = idleinhibit focus, class:^(mpv)$
# Make Rofi blur
# windowrulev2 = float, class:^(Rofi)$
# windowrulev2 = center, class:^(Rofi)$

# Force Wofi to grab input immediately
windowrulev2 = stayfocused, class:^(wofi)$
# windowrulev2 = forceinput, class:^(wofi)$

# # Force Wofi to grab focus immediately
# windowrulev2 = stayfocused, class:^(wofi)$
# windowrulev2 = forceinput, class:^(wofi)$
# # Note: Rofi handles its own dimming usually, but this ensures it floats
#
# --- CALCULATOR WIDGET ---
windowrulev2 = float, class:^(qalculate-gtk)$
windowrulev2 = size 660 450, class:^(qalculate-gtk)$
windowrulev2 = center, class:^(qalculate-gtk)$

# Animations
windowrulev2 = animation popin 80%, class:^(qalculate-gtk)$

# Glass Effect (Optional)
windowrulev2 = opacity 0.80 0.80, class:^(qalculate-gtk)$
##############################
### LAYER RULES ###
##############################

# # 1. Wofi (Launcher)
# layerrule = dimaround, wofi
# layerrule = animation slide top, wofi
# layerrule = ignorezero, wofi
# --- GLAVA (The Desktop Visualizer) ---
# 1. Make it float and ignore input
# Prevent Glava from stealing focus or receiving input
windowrulev2 = float, class:^(GLava)$
#windowrulev2 = pin, class:^(GLava)$
windowrulev2 = nofocus, class:^(GLava)$
windowrulev2 = noinitialfocus, class:^(GLava)$
windowrulev2 = noblur, class:^(GLava)$
windowrulev2 = noshadow, class:^(GLava)$
windowrulev2 = noborder, class:^(GLava)$

# Optional: Lock size/position (Adjust to your resolution)
# windowrulev2 = size 1920 1080, class:^(Gwindowrulev2 = stayfocused, class:^(wofi)$Lava)$
# windowrulev2 = move 0 0, class:^(GLava)$
windowrulev2 = move 320 -8, class:^(GLava)$
# 3. Force it to the bottom (Behind everything)

# 4. Position (Bottom of screen, full width)
# Adjust '1366' to your screen width (likely 1366 or 1920)
# Adjust '468' to push it to the bottom (Screen Height - 300)
# For 1366x768 screen: Use size 1366 300 and move 0 468
# windowrulev2 = move 0 668, class:^(GLava)$
# --- IMAGE VIEWER (Qimgv) ---
windowrulev2 = float, class:^(qimgv)$
windowrulev2 = size 80% 80%, class:^(qimgv)$
windowrulev2 = center, class:^(qimgv)$

# Glass Effect
windowrulev2 = opacity 0.90 0.90, class:^(qimgv)$

# Animation
windowrulev2 = animation popin 80%, class:^(qimgv)$

# --- MEDIA PLAYER (MPV) ---
windowrulev2 = float, class:^(mpv)$
windowrulev2 = size 80% 80%, class:^(mpv)$
windowrulev2 = center, class:^(mpv)$

# Cinema Effect (Dim the background)
windowrulev2 = dimaround, class:^(mpv)$

# Smooth Pop-in Animation
windowrulev2 = animation popin 80%, class:^(mpv)$

# Prevent it from idling (sleeping) while watching
windowrulev2 = idleinhibit focus, class:^(mpv)$
# 2. swaync (Notifications)
layerrule = blur, swaync-control-center
layerrule = ignorezero, swaync-control-center
layerrule = ignorezero, swaync-notification-window
layerrule = animation slide right, swaync-control-center

# 3. Hyprlock (Lock Screen Fade)
layerrule = animation fade, hyprlock
